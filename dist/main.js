(()=>{"use strict";function t(){const t=document.getElementById("project-option");t.classList.add("hidden"),document.querySelector(".project").appendChild(t);const e=document.querySelector("#list-option");e.classList.add("hidden"),document.querySelector(".list-todo").appendChild(e)}function e(t){return l.reduce(((e,n)=>{let c=n.taskList.find((e=>e.id==t));return null!=c&&(e=c),e}),{})}function n(){const t=document.querySelector("#list-form"),e=document.querySelector("#list-input"),n=document.querySelector("#list-input-detail"),c=document.querySelector("#list-input-date");t.classList.add("hidden"),e.value="",n.value="",c.value=""}let c=Number(localStorage.getItem("currentId"))||0;function d(t){document.querySelector(".title").textContent=t.textContent}function o(t,e,n,c,d,o){const l=document.querySelector("ul"),s=document.createElement("li");s.id=t,l.appendChild(s);const i=document.createElement("div");i.classList.add("unchecked"),s.appendChild(i);const r=document.createElement("div");r.classList.add("list-details"),s.appendChild(r),d&&(i.classList.toggle("checked"),r.classList.toggle("line-through"),r.classList.toggle("fade"));const u=document.createElement("div");u.classList.add("task-title"),u.textContent=e,r.appendChild(u);const m=document.createElement("div");m.classList.add("task-details"),m.textContent=n,r.appendChild(m);const p=document.createElement("div");p.classList.add("date"),p.textContent=c,s.appendChild(p);const h=document.createElement("div");h.classList.add("list-right"),s.appendChild(h);const g=a("star_outline");g.classList.add("star-outline"),h.appendChild(g);const L=a("star");L.classList.add("important"),h.appendChild(L),o?g.classList.add("list-hidden"):L.classList.add("list-hidden");const f=document.createElement("div");f.dataset.dropdown="",f.classList.add("edit-codatentainer"),h.appendChild(f);const y=a("more_vert");y.dataset.dropdownButton="",f.appendChild(y)}let l=localStorage.getItem("myProjectList");function s(){localStorage.setItem("myProjectList",JSON.stringify(l)),localStorage.setItem("currentId",c.toString())}function i(t,e){const n=document.querySelector(".project"),c=document.querySelector("#project-form"),d=document.createElement("div");d.setAttribute("data-project",`${t}`),d.classList.add("tile","data-tile"),n.insertBefore(d,c);const o=a("menu");o.setAttribute("data-drag",""),d.appendChild(o);const l=document.createElement("div");l.classList.add("project-info"),d.appendChild(l);const s=document.createElement("div");s.classList.add("project-name"),s.textContent=e,l.appendChild(s);const i=document.createElement("div");i.classList.add("edit-container"),i.setAttribute("data-dropdown",""),d.appendChild(i);const r=a("more_vert");r.setAttribute("data-dropdown-button",""),i.appendChild(r)}function a(t){const e=document.createElement("span");return e.classList.add("material-icons-round"),e.textContent=t,e}l=JSON.parse(l||JSON.stringify([]));const r=()=>document.querySelectorAll("[data-project]").length;const u=(t,e)=>{const n=[];return{dataProject:t,name:e,taskList:n,taskNum:n.length}};function m(){const t=document.querySelector("#project-form");document.querySelector("#project-input").value="",t.classList.add("hidden")}function p(t){document.querySelector(".selected").classList.remove("selected"),t.classList.add("selected")}document.querySelector(".project-cancel-btn").addEventListener("click",m),document.querySelector("#add-project").addEventListener("click",(function(){document.getElementById("project-form").classList.remove("hidden"),document.getElementById("project-input").focus()})),document.querySelector("#project-form").addEventListener("submit",(function(t){t.preventDefault();let e=document.querySelector("#project-input").value,n=r();const c=u(n,e);l.push(c),s(),i(n,e),m()})),document.querySelector(".left-panel").addEventListener("click",(function(e){let n=e.target.closest(".home .tile"),c=e.target.closest(".project .tile");if(null!=n){const e=n.querySelector("[data-name]");p(n),t(),d(e),document.querySelector("#add-list").classList.add("hidden")}else{if(null==c)return;{const e=c.querySelector(".project-name");let n=c.dataset.project;t(),function(t){document.querySelector("ul").textContent="",l[t].taskList.forEach((t=>{o(t.id,t.title,t.details,t.date,t.completed,t.important)}))}(n),p(c),d(e),document.getElementById("add-list").classList.remove("hidden")}}})),l.forEach((t=>{i(t.dataProject,t.name)})),document.querySelector("#add-list").addEventListener("click",(function(){document.querySelector("#list-form").classList.remove("hidden"),document.querySelector("#list-input").focus()})),document.querySelector(".list-cancel-btn").addEventListener("click",n),document.querySelector("#list-form").addEventListener("submit",(function(t){t.preventDefault();let e=document.querySelector("#list-input").value,d=document.querySelector("#list-input-detail").value,i=document.querySelector("#list-input-date").value,a=document.querySelector(".selected").dataset.project,r=function(t){let e;return e=t||"No due date",e}(i),u=c;const m=function(t,e,n,c,d,o,l){return{dataProject:t,id:e,title:n,details:c,completed:!1,important:!1,date:l}}(a,u,e,d,0,0,r);l[a].taskList.push(m),c++,s(),o(u,e,d,r),n()})),document.querySelector(".list-todo").addEventListener("click",(function(t){let n=t.target.matches(".star-outline"),c=t.target.matches(".unchecked");t.target.matches(".list-submit-btn"),t.target.matches(".list-cancel-btn"),t.target.matches("#list-delete"),t.target.matches("#list-edit")&&console.log("Yes that is true"),n?(function(t){t.target.classList.toggle("list-hidden"),t.target.nextElementSibling.classList.toggle("list-hidden")}(t),function(t){let n=e(t.target.closest("li").id);n.important=!n.important,s()}(t)):c&&(function(t){let e=t.target,n=t.target.closest("li").querySelector(".list-details");n.classList.toggle("line-through"),n.classList.toggle("fade"),e.classList.toggle("checked")}(t),function(t){let n=e(t.target.closest("li").id);n.completed=!n.completed,s()}(t))})),document.addEventListener("click",(function(t){const e=t.target.matches("[data-dropdown-button]");(e||null==t.target.closest("[data-dropdown]"))&&e&&function(t){const e=t.target.closest(".edit-container");if(null!=t.target.closest(".tile")){const t=document.querySelector("#project-option");t.classList.remove("hidden"),e.appendChild(t)}else if(null!=t.target.closest("li")){const t=document.getElementById("list-option");t.classList.remove("hidden"),e.appendChild(t)}}(t)})),document.querySelector(".hidden-menu").addEventListener("click",(()=>{document.querySelector(".left-panel").classList.toggle("hidden")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dG9kby1hcHAvLi9zcmMvZWRpdGluZ1Rhc2suanMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAvLi9zcmMvY3JlYXRpbmdUYXNrLmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL2NyZWF0aW5nUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9qZWN0TGlzdCwgc2F2ZVRvTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vY3JlYXRpbmdQcm9qZWN0XCJcbmltcG9ydCB7IHVwZGF0ZVRpdGxlIH0gZnJvbSBcIi4vY3JlYXRpbmdUYXNrXCJcblxuZnVuY3Rpb24gZWRpdENvbnRhaW5lckV2ZW50TGlzdGVuZXIoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dEcm9wRG93bik7XG59XG5cbmZ1bmN0aW9uIHNob3dEcm9wRG93bihlKSB7XG4gICAgY29uc3QgaXNEcm9wRG93bkJ1dHRvbiA9IGUudGFyZ2V0Lm1hdGNoZXMoJ1tkYXRhLWRyb3Bkb3duLWJ1dHRvbl0nKTtcbiAgICBpZiAoIWlzRHJvcERvd25CdXR0b24gJiYgZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtZHJvcGRvd25dJykgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBjdXJyZW50RHJvcERvd247XG4gICAgaWYgKGlzRHJvcERvd25CdXR0b24pIHtcbiAgICAgICAgcmVsb2NhdGVPcHRpb24oZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzaG93UmVuYW1lRm9ybSgpIHtcblxufVxuXG5mdW5jdGlvbiBoaWRlRHJvcERvd24oKSB7XG5cbn1cblxuZnVuY3Rpb24gZGVsZXRlUHJvamVjdCgpIHtcblxufVxuXG5mdW5jdGlvbiByZXZlcnRPcHRpb25Mb2NhdGlvbigpIHtcbiAgICBjb25zdCBwcm9qZWN0T3B0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3Qtb3B0aW9uJyk7XG4gICAgcHJvamVjdE9wdGlvbi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RcIik7XG4gICAgcHJvamVjdC5hcHBlbmRDaGlsZChwcm9qZWN0T3B0aW9uKTtcbiAgICAvL3JldmVydCBvcHRpb24gRE9NIGluIHJpZ2h0IHBhbmVsXG4gICAgY29uc3QgbGlzdE9wdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdC1vcHRpb25cIik7XG4gICAgbGlzdE9wdGlvbi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIGNvbnN0IGxpc3RUb0RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5saXN0LXRvZG9cIik7XG4gICAgbGlzdFRvRG8uYXBwZW5kQ2hpbGQobGlzdE9wdGlvbik7XG59XG5cbmZ1bmN0aW9uIHJlbG9jYXRlT3B0aW9uKGUpIHtcbiAgICBjb25zdCBlZGl0Q29udGFpbmVyID0gZS50YXJnZXQuY2xvc2VzdCgnLmVkaXQtY29udGFpbmVyJyk7XG5cbiAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnRpbGUnKSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RPcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1vcHRpb24nKTtcbiAgICAgICAgcHJvamVjdE9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgZWRpdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0T3B0aW9uKTtcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoXCJsaVwiKSAhPSBudWxsKSB7IC8vcG9wIHVwIGluIGxpc3RcbiAgICAgICAgY29uc3QgbGlzdE9wdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdC1vcHRpb25cIik7XG4gICAgICAgIGxpc3RPcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgICAgZWRpdENvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0T3B0aW9uKTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gc29ydEFycmF5KCkge1xuXG59XG5cbmV4cG9ydCB7IGVkaXRDb250YWluZXJFdmVudExpc3RlbmVyLCBzaG93UmVuYW1lRm9ybSwgaGlkZURyb3BEb3duLCBkZWxldGVQcm9qZWN0LCByZXZlcnRPcHRpb25Mb2NhdGlvbiwgc29ydEFycmF5IH07IiwiaW1wb3J0IHsgcHJvamVjdExpc3QsIHNhdmVUb0xvY2FsU3RvcmFnZSB9IGZyb20gXCIuL2NyZWF0aW5nUHJvamVjdFwiO1xuaW1wb3J0IHsgaGlkZURyb3BEb3duLCByZXZlcnRPcHRpb25Mb2NhdGlvbiB9IGZyb20gXCIuL2VkaXRpbmdQcm9qZWN0XCI7XG5pbXBvcnQgeyBkaXNwbGF5VGFzaywgcHJvY2Vzc0RhdGVEYXRhIH0gZnJvbSBcIi4vY3JlYXRpbmdUYXNrXCI7XG5pbXBvcnQgeyBjaGVja1doaWNoSG9tZVRpbGUgfSBmcm9tIFwiLi9ob21lU2VjdGlvblwiO1xuXG5mdW5jdGlvbiBzdHlsZUNvbXBsZXRlZFRhc2soZSkge1xuICAgIGxldCB1bmNoZWNrZWROb2RlID0gZS50YXJnZXQ7XG4gICAgbGV0IHRhc2tUaWxlID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICBsZXQgbGlzdERldGFpbHMgPSB0YXNrVGlsZS5xdWVyeVNlbGVjdG9yKCcubGlzdC1kZXRhaWxzJyk7XG4gICAgbGlzdERldGFpbHMuY2xhc3NMaXN0LnRvZ2dsZSgnbGluZS10aHJvdWdoJyk7XG4gICAgbGlzdERldGFpbHMuY2xhc3NMaXN0LnRvZ2dsZSgnZmFkZScpO1xuICAgIHVuY2hlY2tlZE5vZGUuY2xhc3NMaXN0LnRvZ2dsZSgnY2hlY2tlZCcpO1xuXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBsZXRlZFRhc2soZSkge1xuICAgIGxldCBsaXN0SUQgPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpLmlkO1xuICAgIGxldCBzZWxlY3RlZFRhc2sgPSBmaW5kU2VsZWN0ZWRUYXNrKGxpc3RJRCk7XG4gICAgc2VsZWN0ZWRUYXNrLmNvbXBsZXRlZCA9ICFzZWxlY3RlZFRhc2suY29tcGxldGVkO1xuICAgIHNhdmVUb0xvY2FsU3RvcmFnZSgpO1xufVxuXG5mdW5jdGlvbiBzdHlsZUltcG9ydGFudFRhc2soZSkge1xuICAgIGxldCBzdGFyT3V0bGluZSA9IGUudGFyZ2V0O1xuICAgIHN0YXJPdXRsaW5lLmNsYXNzTGlzdC50b2dnbGUoJ2xpc3QtaGlkZGVuJyk7XG5cbiAgICBsZXQgc3RhckZpbGxlZCA9IGUudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZztcbiAgICBzdGFyRmlsbGVkLmNsYXNzTGlzdC50b2dnbGUoJ2xpc3QtaGlkZGVuJyk7XG5cbn1cblxuZnVuY3Rpb24gdXBkYXRlSW1wb3J0YW50VGFzayhlKSB7XG4gICAgbGV0IGxpc3RJZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJykuaWQ7XG4gICAgbGV0IHNlbGVjdGVkVGFzayA9IGZpbmRTZWxlY3RlZFRhc2sobGlzdElkKTtcbiAgICBzZWxlY3RlZFRhc2suaW1wb3J0YW50ID0gIXNlbGVjdGVkVGFzay5pbXBvcnRhbnQ7XG4gICAgc2F2ZVRvTG9jYWxTdG9yYWdlKCk7XG59XG5cblxuXG5mdW5jdGlvbiBkZWxldGVUYXNrKCkge1xuXG59XG5cbmZ1bmN0aW9uIGZpbmRTZWxlY3RlZFRhc2sobGlzdElkKSB7XG4gICAgbGV0IHNlbGVjdGVkVGFzayA9IHByb2plY3RMaXN0LnJlZHVjZSgoYWNjLCBwcm9qZWN0KSA9PiB7XG4gICAgICAgIGxldCBjdXJyZW50VGFzayA9IHByb2plY3QudGFza0xpc3QuZmluZCh0YXNrID0+IHRhc2suaWQgPT0gbGlzdElkKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYXNrICE9IG51bGwpIHtcbiAgICAgICAgICAgIGFjYyA9IGN1cnJlbnRUYXNrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuXG4gICAgcmV0dXJuIHNlbGVjdGVkVGFzaztcbn1cblxuZnVuY3Rpb24gc2hvd0VkaXRGb3JtKCkge1xuXG59XG5cbmZ1bmN0aW9uIHJlbG9jYXRlRWRpdExpc3RGb3JtKCkge1xuXG59XG5cbmZ1bmN0aW9uIHJldmVydEVkaXRGb3JtTG9jYXRpb24oKSB7XG5cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0VkaXRUYXNrKCkge1xuXG59XG5cbmZ1bmN0aW9uIHNob3dIaWRkZW5UYXNrKCkge1xuXG59XG5cbmV4cG9ydCB7XG4gICAgc3R5bGVDb21wbGV0ZWRUYXNrLFxuICAgIHN0eWxlSW1wb3J0YW50VGFzayxcbiAgICB1cGRhdGVDb21wbGV0ZWRUYXNrLFxuICAgIHVwZGF0ZUltcG9ydGFudFRhc2ssXG4gICAgZGVsZXRlVGFzayxcbiAgICBzaG93RWRpdEZvcm0sXG4gICAgcmVsb2NhdGVFZGl0TGlzdEZvcm0sXG4gICAgcmV2ZXJ0RWRpdEZvcm1Mb2NhdGlvbixcbiAgICBwcm9jZXNzRWRpdFRhc2ssXG4gICAgc2hvd0hpZGRlblRhc2tcbn0iLCJpbXBvcnQgeyBwcm9qZWN0TGlzdCwgY3JlYXRlU3Bhbkljb24sIHNhdmVUb0xvY2FsU3RvcmFnZSB9IGZyb20gXCIuL2NyZWF0aW5nUHJvamVjdFwiXG5pbXBvcnQge1xuICAgIHN0eWxlQ29tcGxldGVkVGFzayxcbiAgICB1cGRhdGVDb21wbGV0ZWRUYXNrLFxuICAgIHN0eWxlSW1wb3J0YW50VGFzayxcbiAgICB1cGRhdGVJbXBvcnRhbnRUYXNrLFxuICAgIGRlbGV0ZVRhc2ssXG4gICAgc2hvd0VkaXRGb3JtLFxuICAgIHJldmVydEVkaXRGb3JtTG9jYXRpb24sXG4gICAgcHJvY2Vzc0VkaXRUYXNrLFxuICAgIHNob3dIaWRkZW5UYXNrXG59IGZyb20gXCIuL2VkaXRpbmdUYXNrXCJcblxuZnVuY3Rpb24gbGlzdEV2ZW50KCkge1xuICAgIGNvbnN0IGFkZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1saXN0XCIpO1xuICAgIGFkZExpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dMaXN0Rm9ybSk7XG5cbiAgICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1jYW5jZWwtYnRuJyk7XG4gICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlTGlzdEZvcm0pO1xuXG4gICAgY29uc3QgbGlzdFN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LWZvcm0nKTtcbiAgICBsaXN0U3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHByb2Nlc3NMaXN0SW5wdXQpO1xuXG4gICAgY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC10b2RvJyk7XG4gICAgdG9kb0xpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoZWNrTGlzdEV2ZW50KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFzayhkYXRhUHJvamVjdCwgaWQsIHRpdGxlLCBkZXRhaWxzLCBjb21wbGV0ZWQsIGltcG9ydGFudCwgZGF0ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFQcm9qZWN0LFxuICAgICAgICBpZCxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGRldGFpbHMsXG4gICAgICAgIGNvbXBsZXRlZDogY29tcGxldGVkLFxuICAgICAgICBpbXBvcnRhbnQ6IGltcG9ydGFudCxcbiAgICAgICAgZGF0ZTogZGF0ZVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tMaXN0RXZlbnQoZSkge1xuICAgIGxldCBpc1N0YXJJY29uID0gZS50YXJnZXQubWF0Y2hlcygnLnN0YXItb3V0bGluZScpO1xuICAgIGxldCBpc0NpcmNsZUljb24gPSBlLnRhcmdldC5tYXRjaGVzKCcudW5jaGVja2VkJyk7XG5cbiAgICBsZXQgaXNFZGl0U3VibWl0QnRuID0gZS50YXJnZXQubWF0Y2hlcygnLmxpc3Qtc3VibWl0LWJ0bicpO1xuICAgIGxldCBpc0VkaXRUYXNrQ2FuY2VsID0gZS50YXJnZXQubWF0Y2hlcygnLmxpc3QtY2FuY2VsLWJ0bicpO1xuXG4gICAgbGV0IGlzRGVsZXRlQnRuID0gZS50YXJnZXQubWF0Y2hlcygnI2xpc3QtZGVsZXRlJyk7XG4gICAgbGV0IGlzRWRpdEJ0biA9IGUudGFyZ2V0Lm1hdGNoZXMoJyNsaXN0LWVkaXQnKTtcblxuICAgIGlmIChpc0VkaXRCdG4pIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJZZXMgdGhhdCBpcyB0cnVlXCIpO1xuICAgIH1cblxuICAgIGlmIChpc1N0YXJJY29uKSB7XG4gICAgICAgIHN0eWxlSW1wb3J0YW50VGFzayhlKTtcbiAgICAgICAgdXBkYXRlSW1wb3J0YW50VGFzayhlKTtcbiAgICB9IGVsc2UgaWYgKGlzQ2lyY2xlSWNvbikge1xuICAgICAgICBzdHlsZUNvbXBsZXRlZFRhc2soZSk7XG4gICAgICAgIHVwZGF0ZUNvbXBsZXRlZFRhc2soZSk7XG4gICAgfVxufVxuXG5cblxuLy9wb3AgdXAgdGhlIGFkZCBsaXN0IGZvcm1cbmZ1bmN0aW9uIHNob3dMaXN0Rm9ybSgpIHtcbiAgICBjb25zdCBsaXN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LWZvcm0nKTtcbiAgICBsaXN0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlzdC1pbnB1dCcpLmZvY3VzKCk7XG59XG5cbi8vaGlkZSB0aGUgYWRkIGxpc3QgZm9ybVxuZnVuY3Rpb24gaGlkZUxpc3RGb3JtKCkge1xuICAgIGNvbnN0IGxpc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtZm9ybScpO1xuICAgIGNvbnN0IGxpc3RJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LWlucHV0Jyk7XG4gICAgY29uc3QgbGlzdElucHV0RGV0YWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtaW5wdXQtZGV0YWlsJyk7XG4gICAgY29uc3QgbGlzdElucHV0RGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LWlucHV0LWRhdGUnKTtcblxuICAgIGxpc3RGb3JtLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIGxpc3RJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgbGlzdElucHV0RGV0YWlsLnZhbHVlID0gXCJcIjtcbiAgICBsaXN0SW5wdXREYXRlLnZhbHVlID0gXCJcIjtcbn1cbi8vZ2V0IGlkIGZyb20gbG9jYWwgc3RvcmFnZSBvciBnZXQgYSBkZWZhdWx0IG9uZVxubGV0IGRlZmF1bHRJZCA9IDA7XG5sZXQgaWQgPSBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50SWRcIikpIHx8IGRlZmF1bHRJZDtcblxuZnVuY3Rpb24gcHJvY2Vzc0xpc3RJbnB1dChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LWlucHV0JykudmFsdWU7XG4gICAgbGV0IGRldGFpbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlzdC1pbnB1dC1kZXRhaWwnKS52YWx1ZTtcbiAgICBsZXQgZGF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtaW5wdXQtZGF0ZScpLnZhbHVlO1xuXG4gICAgbGV0IGRhdGFQcm9qZWN0ID0gZmluZEN1cnJlbnREYXRhUHJvamVjdCgpO1xuICAgIGxldCBkYXRlID0gcHJvY2Vzc0RhdGVEYXRhKGRhdGVJbnB1dCk7XG4gICAgbGV0IGxpc3RJRCA9IGlkO1xuXG4gICAgY29uc3QgbmV3VGFzayA9IGNyZWF0ZVRhc2soZGF0YVByb2plY3QsIGxpc3RJRCwgdGl0bGUsIGRldGFpbHMsIGZhbHNlLCBmYWxzZSwgZGF0ZSk7XG4gICAgcHJvamVjdExpc3RbZGF0YVByb2plY3RdLnRhc2tMaXN0LnB1c2gobmV3VGFzayk7XG4gICAgaWQrKztcbiAgICBzYXZlVG9Mb2NhbFN0b3JhZ2UoKTtcblxuICAgIGFkZFRhc2sobGlzdElELCB0aXRsZSwgZGV0YWlscywgZGF0ZSk7XG4gICAgaGlkZUxpc3RGb3JtKCk7XG59XG4vL2Rpc3BheSBhbGwgdGhlIHRhc2sgaW4gYSBwcm9qZWN0XG5mdW5jdGlvbiBkaXNwbGF5VGFzayhkYXRhUHJvamVjdCkge1xuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndWwnKTtcbiAgICB1bC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgcHJvamVjdExpc3RbZGF0YVByb2plY3RdLnRhc2tMaXN0LmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGFkZFRhc2sodGFzay5pZCwgdGFzay50aXRsZSwgdGFzay5kZXRhaWxzLCB0YXNrLmRhdGUsIHRhc2suY29tcGxldGVkLCB0YXNrLmltcG9ydGFudCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRpdGxlKG5hbWVOb2RlKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKTtcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IG5hbWVOb2RlLnRleHRDb250ZW50O1xufVxuXG5cblxuXG5cbmZ1bmN0aW9uIGFkZFRhc2sobGlzdElkLCB0aXRsZSwgZGV0YWlscywgZGF0ZSwgY29tcGxldGVkLCBpbXBvcnRhbnQpIHtcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGxpLmlkID0gbGlzdElkO1xuICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcblxuICAgIGNvbnN0IHVuY2hlY2tlZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHVuY2hlY2tlZC5jbGFzc0xpc3QuYWRkKCd1bmNoZWNrZWQnKTtcbiAgICBsaS5hcHBlbmRDaGlsZCh1bmNoZWNrZWQpO1xuXG4gICAgY29uc3QgbGlzdERldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsaXN0RGV0YWlscy5jbGFzc0xpc3QuYWRkKCdsaXN0LWRldGFpbHMnKTtcbiAgICBsaS5hcHBlbmRDaGlsZChsaXN0RGV0YWlscyk7XG5cbiAgICBpZiAoY29tcGxldGVkKSB7XG4gICAgICAgIHVuY2hlY2tlZC5jbGFzc0xpc3QudG9nZ2xlKCdjaGVja2VkJyk7XG4gICAgICAgIGxpc3REZXRhaWxzLmNsYXNzTGlzdC50b2dnbGUoJ2xpbmUtdGhyb3VnaCcpO1xuICAgICAgICBsaXN0RGV0YWlscy5jbGFzc0xpc3QudG9nZ2xlKCdmYWRlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXRpdGxlXCIpO1xuICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIGxpc3REZXRhaWxzLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG5cbiAgICBjb25zdCB0YXNrRGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEZXRhaWxzLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWRldGFpbHNcIik7XG4gICAgdGFza0RldGFpbHMudGV4dENvbnRlbnQgPSBkZXRhaWxzO1xuICAgIGxpc3REZXRhaWxzLmFwcGVuZENoaWxkKHRhc2tEZXRhaWxzKTtcblxuICAgIGNvbnN0IGRhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkYXRlRGl2LmNsYXNzTGlzdC5hZGQoXCJkYXRlXCIpO1xuICAgIGRhdGVEaXYudGV4dENvbnRlbnQgPSBkYXRlO1xuICAgIGxpLmFwcGVuZENoaWxkKGRhdGVEaXYpO1xuXG4gICAgY29uc3QgbGlzdFJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGlzdFJpZ2h0LmNsYXNzTGlzdC5hZGQoJ2xpc3QtcmlnaHQnKTtcbiAgICBsaS5hcHBlbmRDaGlsZChsaXN0UmlnaHQpO1xuXG4gICAgY29uc3Qgc3Rhck91dGxpbmUgPSBjcmVhdGVTcGFuSWNvbignc3Rhcl9vdXRsaW5lJyk7XG4gICAgc3Rhck91dGxpbmUuY2xhc3NMaXN0LmFkZCgnc3Rhci1vdXRsaW5lJyk7XG4gICAgbGlzdFJpZ2h0LmFwcGVuZENoaWxkKHN0YXJPdXRsaW5lKTtcblxuICAgIGNvbnN0IHN0YXIgPSBjcmVhdGVTcGFuSWNvbignc3RhcicpO1xuICAgIHN0YXIuY2xhc3NMaXN0LmFkZCgnaW1wb3J0YW50Jyk7XG4gICAgbGlzdFJpZ2h0LmFwcGVuZENoaWxkKHN0YXIpO1xuXG4gICAgaWYgKGltcG9ydGFudCkge1xuICAgICAgICBzdGFyT3V0bGluZS5jbGFzc0xpc3QuYWRkKCdsaXN0LWhpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXIuY2xhc3NMaXN0LmFkZCgnbGlzdC1oaWRkZW4nKTtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWRpdENvbnRhaW5lci5kYXRhc2V0LmRyb3Bkb3duID0gXCJcIjtcbiAgICBlZGl0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2VkaXQtY29kYXRlbnRhaW5lcicpO1xuICAgIGxpc3RSaWdodC5hcHBlbmRDaGlsZChlZGl0Q29udGFpbmVyKTtcblxuICAgIGNvbnN0IHRocmVlRG90cyA9IGNyZWF0ZVNwYW5JY29uKCdtb3JlX3ZlcnQnKTtcbiAgICB0aHJlZURvdHMuZGF0YXNldC5kcm9wZG93bkJ1dHRvbiA9IFwiXCI7XG4gICAgZWRpdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aHJlZURvdHMpO1xuXG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NEYXRlRGF0YShkYXRlKSB7XG4gICAgbGV0IGZvcm1hdHRlZERhdGU7XG4gICAgaWYgKCFkYXRlKSB7XG4gICAgICAgIGZvcm1hdHRlZERhdGUgPSBcIk5vIGR1ZSBkYXRlXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybWF0dGVkRGF0ZSA9IGRhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGU7XG59XG4vL2Z1bmN0aW9uIHRvIGZpbmQgdGhlIGRhdGEtcHJvamVjdCBpbmRleCB3aGVuIGFkZGluZyBuZXcgdGFza3NcbmZ1bmN0aW9uIGZpbmRDdXJyZW50RGF0YVByb2plY3QoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQnKTtcbiAgICByZXR1cm4gc2VsZWN0ZWQuZGF0YXNldC5wcm9qZWN0O1xufVxuXG5leHBvcnQgeyB1cGRhdGVUaXRsZSwgbGlzdEV2ZW50LCBkaXNwbGF5VGFzaywgaWQsIGFkZFRhc2ssIHByb2Nlc3NEYXRlRGF0YSB9OyIsImltcG9ydCB7IGRpc3BsYXlUYXNrLCB1cGRhdGVUaXRsZSwgaWQgfSBmcm9tIFwiLi9jcmVhdGluZ1Rhc2tcIjtcbmltcG9ydCB7IHJldmVydEVkaXRGb3JtTG9jYXRpb24gfSBmcm9tIFwiLi9lZGl0aW5nVGFza1wiO1xuaW1wb3J0IHsgcmV2ZXJ0T3B0aW9uTG9jYXRpb24gfSBmcm9tIFwiLi9lZGl0aW5nUHJvamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tXaGljaEhvbWVUaWxlIH0gZnJvbSBcIi4vaG9tZVNlY3Rpb25cIjtcblxuXG5mdW5jdGlvbiBjcmVhdGVFdmVudExpc3RlbmVyKCkge1xuICAgIC8vZXZlbnQgbGlzdGVybmVyIGZvciBjcmVhdGluZyBhIGZvcm0gZm9yIGFkZGluZyBwcm9qZWN0c1xuICAgIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNhbmNlbC1idG4nKTtcbiAgICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVQcm9qZWN0Rm9ybSk7XG5cbiAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXByb2plY3QnKTtcbiAgICBhZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dQcm9qZWN0Rm9ybSk7XG5cbiAgICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1mb3JtJyk7XG4gICAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHByb2Nlc3NQcm9qZWN0SW5wdXQpO1xuXG4gICAgY29uc3QgbGVmdFBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxlZnQtcGFuZWwnKTtcbiAgICBsZWZ0UGFuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja1RpbGUpO1xuXG5cbiAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0TGlzdCk7XG5cbn1cblxuXG4vL2dldCBwcm9qZWN0IGxpc3Qgb2Ygb2JqZWN0cyBmcm9tIGxvY2FrIHN0b3JhZ2Ugb3Igc3RhcnQgd2l0aCBlbXB0eVxubGV0IGRlZmF1bHRQcm9qZWN0TGlzdCA9IFtdO1xubGV0IHByb2plY3RMaXN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJteVByb2plY3RMaXN0XCIpO1xuXG5wcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UocHJvamVjdExpc3QgfHwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFByb2plY3RMaXN0KSk7XG5cbi8vcHJvY2VzcyB0aGUgaW5wdXQgYW5kIHByZXBhcmUgdG8gY3JlYXRlIHByb2plY3QgZWxlbWVudFxuZnVuY3Rpb24gcHJvY2Vzc1Byb2plY3RJbnB1dChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LWlucHV0JykudmFsdWU7XG4gICAgbGV0IGRhdGFQcm9qZWN0ID0gZmluZE5leHREYXRhc2V0KCk7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGNyZWF0ZVByb2plY3QoZGF0YVByb2plY3QsIHByb2plY3ROYW1lKTtcblxuICAgIHByb2plY3RMaXN0LnB1c2gobmV3UHJvamVjdCk7XG4gICAgc2F2ZVRvTG9jYWxTdG9yYWdlKCk7XG5cbiAgICBhZGRQcm9qZWN0KGRhdGFQcm9qZWN0LCBwcm9qZWN0TmFtZSk7XG4gICAgaGlkZVByb2plY3RGb3JtKCk7XG5cbn1cblxuLy9zYXZlIHByb2plY3RMaXN0IGFuZCBsYXN0IGlkIGRhdGEgb24gbG9jYWwgc3RvcmFnZVxuZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudElkXCIsIChpZCkudG9TdHJpbmcoKSk7XG5cblxufVxuXG4vL2Rpc3BsYXkgdGhlIGxpc3Qgb2YgYWxsIHByb2plY3RzIGluIHRoZSBsZWZ0IHBhbmVsXG5mdW5jdGlvbiBkaXNwbGF5UHJvamVjdChhcnJheSkge1xuICAgIGFycmF5LmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGFkZFByb2plY3QocHJvamVjdC5kYXRhUHJvamVjdCwgcHJvamVjdC5uYW1lKTtcbiAgICB9KVxufVxuLy9jcmVhdGUgYSBwcm9qZWN0IGFuZCBhZGQgaXQgdG8gdGhlIGxpc3Qgb2YgcHJvamVjdHMgaW4gSFRNO1xuZnVuY3Rpb24gYWRkUHJvamVjdChkYXRhUHJvamVjdCwgdGV4dElucHV0KSB7XG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0Jyk7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LWZvcm0nKTtcblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcsIGAke2RhdGFQcm9qZWN0fWApO1xuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0aWxlJywgJ2RhdGEtdGlsZScpO1xuICAgIHByb2plY3QuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgZm9ybSk7XG5cbiAgICAvL21lbnUgdGhyZWUgbGluZXMgaWNvblxuICAgIGNvbnN0IG1lbnVJY29uID0gY3JlYXRlU3Bhbkljb24oJ21lbnUnKTtcbiAgICBtZW51SWNvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtZHJhZycsICcnKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWVudUljb24pO1xuICAgIC8vbmFtZSBhbmQgbnVtYmVyIHN0YXR1c1xuICAgIGNvbnN0IHByb2plY3RJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdEluZm8uY2xhc3NMaXN0LmFkZCgncHJvamVjdC1pbmZvJyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RJbmZvKTtcblxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1uYW1lJyk7XG4gICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSB0ZXh0SW5wdXQ7XG5cbiAgICBwcm9qZWN0SW5mby5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgLy90aHJlZSBkb3RzIG9uIHRoZSByaWdodCBzZWN0aW9uXG4gICAgY29uc3QgZWRpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVkaXREaXYuY2xhc3NMaXN0LmFkZCgnZWRpdC1jb250YWluZXInKTtcbiAgICBlZGl0RGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1kcm9wZG93bicsICcnKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdERpdik7XG5cbiAgICBjb25zdCBlZGl0SWNvbiA9IGNyZWF0ZVNwYW5JY29uKCdtb3JlX3ZlcnQnKTtcbiAgICBlZGl0SWNvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWRyb3Bkb3duLWJ1dHRvblwiLCBcIlwiKTtcbiAgICBlZGl0RGl2LmFwcGVuZENoaWxkKGVkaXRJY29uKTtcblxufVxuLy9jcmVhdGUgc3BhbiBpY29uIG9mIGdvb2dsZSBtYXRlcmlhbHNcbmZ1bmN0aW9uIGNyZWF0ZVNwYW5JY29uKG5hbWUpIHtcbiAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGljb24uY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMtcm91bmQnKTtcbiAgICBpY29uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICByZXR1cm4gaWNvbjtcbn1cblxuLy9maW5kIG5leHQgZGF0YS1zZXRcbmNvbnN0IGZpbmROZXh0RGF0YXNldCA9ICgpID0+IHtcbiAgICBjb25zdCBhbGxwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1wcm9qZWN0XVwiKTtcbiAgICByZXR1cm4gYWxscHJvamVjdHMubGVuZ3RoO1xufVxuXG4vLyByZW1vdmUgYWRkIHRhc2sgQnRuIHdoZW4gaG9tZVRpbGVzIGlzIHNlbGVjdGVkXG5mdW5jdGlvbiBoaWRlQWRkVGFza0J0bigpIHtcbiAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1saXN0Jyk7XG4gICAgYWRkVGFza0J0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbn1cblxuLy9jaGVjayB0byBzZWUgd2hhdCB0aWxlIGlzIHNlbGVjdGVkXG5mdW5jdGlvbiBjaGVja1RpbGUoZSkge1xuICAgIGxldCBob21lVGlsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5ob21lIC50aWxlJyk7XG4gICAgbGV0IHByb2plY3RUaWxlID0gZS50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QgLnRpbGUnKTtcblxuXG4gICAgaWYgKGhvbWVUaWxlICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBob21lVGlsZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lXScpO1xuICAgICAgICBzZWxlY3RUaWxlKGhvbWVUaWxlKTtcbiAgICAgICAgcmV2ZXJ0T3B0aW9uTG9jYXRpb24oKTtcbiAgICAgICAgLy8gY2hlY2tXaGljaEhvbWVUaWxlKGhvbWVUaWxlKTtcbiAgICAgICAgdXBkYXRlVGl0bGUodGl0bGUpO1xuICAgICAgICBoaWRlQWRkVGFza0J0bigpO1xuICAgIH0gZWxzZSBpZiAocHJvamVjdFRpbGUgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCB0aXRsZSA9IHByb2plY3RUaWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpO1xuICAgICAgICBsZXQgZGF0YVByb2plY3QgPSBwcm9qZWN0VGlsZS5kYXRhc2V0LnByb2plY3Q7XG5cbiAgICAgICAgcmV2ZXJ0T3B0aW9uTG9jYXRpb24oKTtcblxuICAgICAgICBkaXNwbGF5VGFzayhkYXRhUHJvamVjdCk7XG4gICAgICAgIHNlbGVjdFRpbGUocHJvamVjdFRpbGUpO1xuICAgICAgICB1cGRhdGVUaXRsZSh0aXRsZSk7XG4gICAgICAgIHNob3dBZGRUYXNrQnRuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxufVxuLy9jcmVhdGUgcHJvamVjdCBmYWN0b3J5IGZ1bmN0aW9uXG5jb25zdCBjcmVhdGVQcm9qZWN0ID0gKGRhdGFQcm9qZWN0LCBuYW1lKSA9PiB7XG4gICAgY29uc3QgdGFza0xpc3QgPSBbXTtcbiAgICBjb25zdCB0YXNrTnVtID0gdGFza0xpc3QubGVuZ3RoO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFQcm9qZWN0LFxuICAgICAgICBuYW1lLFxuICAgICAgICB0YXNrTGlzdCxcbiAgICAgICAgdGFza051bVxuICAgIH1cbn1cblxuXG4vL3BvcCB1cCB0aGUgcHJvamVjdCBmb3JtXG5mdW5jdGlvbiBzaG93UHJvamVjdEZvcm0oKSB7XG4gICAgY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdC1mb3JtJyk7XG4gICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgLy9mb2N1cyBvbiBpbnB1dCBmaWVsZFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LWlucHV0JykuZm9jdXMoKTtcbn1cbi8vaGlkZSB0aGUgcHJvamVjdCBmb3JtXG5mdW5jdGlvbiBoaWRlUHJvamVjdEZvcm0oKSB7XG4gICAgY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1mb3JtJyk7XG4gICAgY29uc3QgcHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QtaW5wdXQnKTtcblxuICAgIHByb2plY3RJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdFRpbGUobm9kZSkge1xuICAgIGNvbnN0IHNlbGVjdGVkVGlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZCcpO1xuXG4gICAgc2VsZWN0ZWRUaWxlLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuXG59XG5cbi8vc2hvdyBhZGRUYXNrQnRuIHdoZW4gcHJqZWN0IHRpbGVcbmZ1bmN0aW9uIHNob3dBZGRUYXNrQnRuKCkge1xuICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1saXN0XCIpO1xuICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcblxufVxuXG5leHBvcnQgeyBjcmVhdGVFdmVudExpc3RlbmVyLCBjcmVhdGVTcGFuSWNvbiwgcHJvamVjdExpc3QsIHNhdmVUb0xvY2FsU3RvcmFnZSwgaGlkZUFkZFRhc2tCdG4sIGNyZWF0ZVByb2plY3QgfTsiLCJpbXBvcnQgeyBjcmVhdGVFdmVudExpc3RlbmVyIH0gZnJvbSBcIi4vY3JlYXRpbmdQcm9qZWN0XCI7XG5pbXBvcnQgeyBsaXN0RXZlbnQgfSBmcm9tIFwiLi9jcmVhdGluZ1Rhc2tcIjtcbmltcG9ydCB7IGVkaXRDb250YWluZXJFdmVudExpc3RlbmVyIH0gZnJvbSBcIi4vZWRpdGluZ1Byb2plY3RcIjtcblxuXG5jcmVhdGVFdmVudExpc3RlbmVyKCk7XG5saXN0RXZlbnQoKTtcbmVkaXRDb250YWluZXJFdmVudExpc3RlbmVyKCk7XG4vL2hpZGUgc2lkZSBtZW51IGV2ZW50IGxpc3RlbmVyXG5jb25zdCBoaWRkZW5NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhpZGRlbi1tZW51Jyk7XG5oaWRkZW5NZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IGxlZnRQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sZWZ0LXBhbmVsJyk7XG4gICAgbGVmdFBhbmVsLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xufSk7Il0sIm5hbWVzIjpbInJldmVydE9wdGlvbkxvY2F0aW9uIiwicHJvamVjdE9wdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJxdWVyeVNlbGVjdG9yIiwiYXBwZW5kQ2hpbGQiLCJsaXN0T3B0aW9uIiwiZmluZFNlbGVjdGVkVGFzayIsImxpc3RJZCIsInByb2plY3RMaXN0IiwicmVkdWNlIiwiYWNjIiwicHJvamVjdCIsImN1cnJlbnRUYXNrIiwidGFza0xpc3QiLCJmaW5kIiwidGFzayIsImlkIiwiaGlkZUxpc3RGb3JtIiwibGlzdEZvcm0iLCJsaXN0SW5wdXQiLCJsaXN0SW5wdXREZXRhaWwiLCJsaXN0SW5wdXREYXRlIiwidmFsdWUiLCJOdW1iZXIiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidXBkYXRlVGl0bGUiLCJuYW1lTm9kZSIsInRleHRDb250ZW50IiwiYWRkVGFzayIsInRpdGxlIiwiZGV0YWlscyIsImRhdGUiLCJjb21wbGV0ZWQiLCJpbXBvcnRhbnQiLCJ1bCIsImxpIiwiY3JlYXRlRWxlbWVudCIsInVuY2hlY2tlZCIsImxpc3REZXRhaWxzIiwidG9nZ2xlIiwidGFza1RpdGxlIiwidGFza0RldGFpbHMiLCJkYXRlRGl2IiwibGlzdFJpZ2h0Iiwic3Rhck91dGxpbmUiLCJjcmVhdGVTcGFuSWNvbiIsInN0YXIiLCJlZGl0Q29udGFpbmVyIiwiZGF0YXNldCIsImRyb3Bkb3duIiwidGhyZWVEb3RzIiwiZHJvcGRvd25CdXR0b24iLCJzYXZlVG9Mb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZFByb2plY3QiLCJkYXRhUHJvamVjdCIsInRleHRJbnB1dCIsImZvcm0iLCJjb250YWluZXIiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRCZWZvcmUiLCJtZW51SWNvbiIsInByb2plY3RJbmZvIiwicHJvamVjdE5hbWUiLCJlZGl0RGl2IiwiZWRpdEljb24iLCJuYW1lIiwiaWNvbiIsInBhcnNlIiwiZmluZE5leHREYXRhc2V0IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImNyZWF0ZVByb2plY3QiLCJ0YXNrTnVtIiwiaGlkZVByb2plY3RGb3JtIiwicHJvamVjdEZvcm0iLCJzZWxlY3RUaWxlIiwibm9kZSIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb2N1cyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Byb2plY3QiLCJwdXNoIiwiaG9tZVRpbGUiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicHJvamVjdFRpbGUiLCJmb3JFYWNoIiwiZGlzcGxheVRhc2siLCJkYXRlSW5wdXQiLCJmb3JtYXR0ZWREYXRlIiwicHJvY2Vzc0RhdGVEYXRhIiwibGlzdElEIiwibmV3VGFzayIsImNyZWF0ZVRhc2siLCJpc1N0YXJJY29uIiwibWF0Y2hlcyIsImlzQ2lyY2xlSWNvbiIsImNvbnNvbGUiLCJsb2ciLCJuZXh0RWxlbWVudFNpYmxpbmciLCJzdHlsZUltcG9ydGFudFRhc2siLCJzZWxlY3RlZFRhc2siLCJ1cGRhdGVJbXBvcnRhbnRUYXNrIiwidW5jaGVja2VkTm9kZSIsInN0eWxlQ29tcGxldGVkVGFzayIsInVwZGF0ZUNvbXBsZXRlZFRhc2siLCJpc0Ryb3BEb3duQnV0dG9uIiwicmVsb2NhdGVPcHRpb24iXSwic291cmNlUm9vdCI6IiJ9